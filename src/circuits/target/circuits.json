{"noir_version":"1.0.0-beta.15+83245db91dcf63420ef4bcbbd85b98f397fee663","hash":"11003180368941044131","abi":{"parameters":[{"name":"p1","type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"private"},{"name":"p2","type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"private"},{"name":"asset_id","type":{"kind":"string","length":4},"visibility":"public"}],"return_type":{"abi_type":{"kind":"tuple","fields":[{"kind":"integer","sign":"unsigned","width":64},{"kind":"string","length":4}]},"visibility":"public"},"error_types":{"361444214588792908":{"error_kind":"string","string":"attempt to multiply with overflow"},"1998584279744703196":{"error_kind":"string","string":"attempt to subtract with overflow"},"14990209321349310352":{"error_kind":"string","string":"attempt to add with overflow"}}},"bytecode":"H4sIAAAAAAAA/81YvW4TQRCetc/YsRPHv0D8gw/RkC4oD5CTEBIFQpQ0KInwKXKBActEcpmGOoiKAilvQIdAoqahyQOkSYegCAW0GK/ZxZNh7dtZHxYjWeObmZ355md3zxbwmzzFH+12uq0R31TPYvRJKi4pIDJhkCVGnwyRJQ0yzyBLKZmH4lPSMh+sSDBsz8XLzRMwhwS+4hvtu73TG0fr7+7dentwcP/B9c3Ptwfvn7y4efrj5TeIN2kBbkkvzxNwGQl8xW2S1lMzDZgPdhgYtkbybYzE8yOMdUXxvEagR1kqNohMGhWJvwQn+MhNHuyLu2rtd7CDca4acCaZOMES59nPwe4KI6e8PYZYh4uzo0zk2xiR4SooPu4FbpBU0OEqwvzDVQT7RpTAbbhKMP9wCbAfrgIjpyLEM1y07lFx8QaIyr0QbStmKX2wW4vzKite0Ra6mWWYvAhomTQKiFePBP9XBZni91D5FWUGhgrwCi0cciw7rLsCvJOIe9IVHHG1gIdLU4rEicLHuS04m7/KwMDogeDUBe8jiScgenpQRuV0Ef6vnCSeQMk5h+TZcPhaziSjR+2yise8BNtVsK/vJXCrg1wXED09IyMozdkHlxl+GXOQdp0DiSeAeC9RRi+ERT1iv0TXFK9pC10MKQiIB+6F6Zp81IW5xsBQA7eici8ajCkqV/zAfcuM+SXkD/46uG0auS6AeH/WcLCYyLczS2CsDcWbYwQwSVAqtoisCX9PDbeROMmIW2bYAPtGNsGteNyfZRcYmBoQD6aoOAmwx5+GxWBKgj2mDCwGkwf2mJZgMZhSYI8pa2977kCSe9ZD8qR6TsHkjV/OtZwN2QuZexbpJDUVP/lysnUcfqjjWK0ZuquK39l547+qe9glXJuhW1f8cO/jp+9f08c0L/1/TLvTCx/2O/vhdqe7H/b6S0qeUbyKasCdSUkVt/XjelKqou/ar46D++UDj/QZnDLotF+P2GYIF/z4YhoO05tFSfEKkul61BTHveyHe2Fv++mzx/1O2O1TtFkUidGVhF6fc1tv7GoWfc/RgIp7hnViynOC8Fm2YobfZYNO+9TdwHh1Hr8ABtUHJIkaAAA=","debug_symbols":"pZTLjoMgFIbfhbULDhcBX2UyaayljQlRQ3WSSdN3nyMHellMMmE2fip8v3i43NjJH7fLYZzO85V1Hzd2jGMI4+UQ5qFfx3nCt7d7w8rjYY3e4yv20o7W0kc/raybthAa9tWHLXW6Lv2UuPYRW3nD/HRCYuB5DH6/uzdPm/+uKttmWTnx0PWffc2Lr6HGb43OfmvbCt+AyL4RssZXqvimyrdl/BZUhW+lLX5rKnzgpsw+cMurEqx6JDj47xjqEsCVaQQhKhPgmfC+kj7xqR/G+Lb3WIs9G2bS1bIOv+/SFTjrJAIIgiAJiqAJGIGlA0OwBJcgOAEImILrREiCImgCpuAeEoZgCS5BYopBAAFTcLVIScAUh9CE/XewPtJk2kxHVHyvERIyxV4opMxUmXrnfS90HPtj8PmcOm/T8HJsrd9LaSkH2xLnwZ+26PcypzYs/A8=","file_map":{"50":{"source":"// Main circuit:\n//  - p1: private feed with 7 decimal places (e.g., 3000000000 represents 300.00, price * 1e7)\n//  - p2: private feed with 7 decimal places (e.g., 3000000000 represents 300.00, price * 1e7)\n//  - asset_id: public (binds proof to an asset, e.g. TSLA)\n// Returns: public (final_price with 2 decimals, asset_id)\n// Throws an error if one price is more than 7% over the other\nfn main(\n    p1: u64,\n    p2: u64,\n    asset_id: pub str<4>,\n) -> pub (u64, str<4>) {\n    assert(p1 > 0);\n    assert(p2 > 0);\n\n    // Normalize both prices from 7 decimals to 2 decimal places\n    // Divide by 100000 (1e5) to convert from 1e7 to 1e2 (2 decimals)\n    let p1_normalized = p1 / 100000;\n    let p2_normalized = p2 / 100000;\n\n    let diff = if p1_normalized > p2_normalized { \n        p1_normalized - p2_normalized \n    } else { \n        p2_normalized - p1_normalized \n    };\n    let max = if p1_normalized > p2_normalized { \n        p1_normalized \n    } else { \n        p2_normalized \n    };\n\n    // Ensure prices are within 7% of each other, otherwise fail\n    assert(diff * 100 <= max * 7);\n\n    // Average the two normalized prices (both now have 2 decimal places)\n    let final_price = (p1_normalized + p2_normalized) / 2;\n\n    (final_price, asset_id)\n}\n\n#[test]\nfn test_main() {\n    let asset_id: str<4> = \"TSLA\";\n    \n    // Test Case 1: p1=300.00 (3000000000), p2=300.01 (3000100000)\n    // p1_normalized = 3000000000 / 100000 = 30000\n    // p2_normalized = 3000100000 / 100000 = 30001\n    // average = (30000 + 30001) / 2 = 30000 (represents 300.00)\n    let (price, id) = main(3000000000, 3000100000, asset_id);\n    assert(price == 30000);\n    assert(id == asset_id);\n    \n    // Test Case 2: p1=395.23 (3952300000), p2=395.25 (3952500000)\n    // p1_normalized = 3952300000 / 100000 = 39523\n    // p2_normalized = 3952500000 / 100000 = 39525\n    // average = (39523 + 39525) / 2 = 39524 (represents 395.24)\n    let (price2, id2) = main(3952300000, 3952500000, asset_id);\n    assert(price2 == 39524);\n    assert(id2 == asset_id);\n    \n    // Test Case 3: Equal prices p1=200.00 (2000000000), p2=200.00 (2000000000)\n    let (price3, id3) = main(2000000000, 2000000000, asset_id);\n    assert(price3 == 20000); // Represents 200.00\n    assert(id3 == asset_id);\n    \n    // Test with different asset - prices at 7% threshold\n    let asset_id_btc: str<4> = \"BTC \";\n    // p1=100.00 (1000000000), p2=107.00 (1070000000) - exactly 7% diff\n    // p1_normalized = 1000000000 / 100000 = 10000\n    // p2_normalized = 1070000000 / 100000 = 10700\n    // diff = 700, max = 10700, diff * 100 = 70000, max * 7 = 74900\n    // 70000 <= 74900 (within threshold)\n    // average = (10000 + 10700) / 2 = 10350 (represents 103.50)\n    let (price4, id4) = main(1000000000, 1070000000, asset_id_btc);\n    assert(price4 == 10350);\n    assert(id4 == asset_id_btc);\n}\n","path":"/Users/fabiansanchezd/Documents/Neko-Oracle-RWA/src/circuits/src/main.nr"}},"expression_width":{"Bounded":{"width":4}}}